{"ast":null,"code":"var _jsxFileName = \"/home/mutahharahmadpersonal/Development/Gro Pakistan/Current/Latest/grocapitalapp-react/src/middlewares/FreshbooksMiddleware.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useContext } from \"react\";\nimport { AppControlContext } from \"../context/AppControlContext\";\nimport { useHistory } from \"react-router-dom\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport addFreshbooksProfitLoss from \"../services/Freshbooks/AddFreshbooksProfitLoss\";\nimport getUserProfile from \"../services/Forms/getUserProfile\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst FreshbooksMiddleware = () => {\n  _s();\n\n  const history = useHistory();\n  const {\n    setFormStep\n  } = useContext(AppControlContext);\n  useEffect(() => {\n    const queryParam = new URLSearchParams(window.location.search);\n    const data = {\n      company_name: queryParam.get(\"company_name\") ? queryParam.get(\"company_name\") : \"\",\n      currency_code: queryParam.get(\"currency_code\") ? queryParam.get(\"currency_code\") : \"\",\n      end_date: queryParam.get(\"end_date\") ? queryParam.get(\"end_date\") : \"\",\n      total_expenses: queryParam.get(\"total_expenses\") ? queryParam.get(\"total_expenses\") : \"\",\n      total_income: queryParam.get(\"total_income\") ? queryParam.get(\"total_income\") : \"\"\n    };\n    addFreshbooksProfitLoss(data).then(async () => {\n      getUserProfile().then(res => {\n        if (res.success) {\n          if (res.response.form_step === 6) history.push(\"/dashboard\");else {\n            setFormStep(res.response.form_step);\n            history.push(\"/registration\");\n          }\n        }\n      }).catch(err => console.log(err));\n    }).catch(err => console.log(err));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n    active: true,\n    spinner: true,\n    text: \"Adding Freshbooks Data to database...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FreshbooksMiddleware, \"03KFQwJ42yjFVSPI5FDjmghn1vU=\", false, function () {\n  return [useHistory];\n});\n\n_c = FreshbooksMiddleware;\nexport default FreshbooksMiddleware;\n\nvar _c;\n\n$RefreshReg$(_c, \"FreshbooksMiddleware\");","map":{"version":3,"sources":["/home/mutahharahmadpersonal/Development/Gro Pakistan/Current/Latest/grocapitalapp-react/src/middlewares/FreshbooksMiddleware.jsx"],"names":["useEffect","useContext","AppControlContext","useHistory","LoadingOverlay","addFreshbooksProfitLoss","getUserProfile","FreshbooksMiddleware","history","setFormStep","queryParam","URLSearchParams","window","location","search","data","company_name","get","currency_code","end_date","total_expenses","total_income","then","res","success","response","form_step","push","catch","err","console","log"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,UAApB,QAAsC,OAAtC;AACA,SAASC,iBAAT,QAAkC,8BAAlC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,OAAOC,uBAAP,MAAoC,gDAApC;AACA,OAAOC,cAAP,MAA2B,kCAA3B;;;AAEA,MAAMC,oBAAoB,GAAG,MAAM;AAAA;;AACjC,QAAMC,OAAO,GAAGL,UAAU,EAA1B;AACA,QAAM;AAAEM,IAAAA;AAAF,MAAkBR,UAAU,CAACC,iBAAD,CAAlC;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMU,UAAU,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CAAnB;AACA,UAAMC,IAAI,GAAG;AACXC,MAAAA,YAAY,EAAEN,UAAU,CAACO,GAAX,CAAe,cAAf,IACVP,UAAU,CAACO,GAAX,CAAe,cAAf,CADU,GAEV,EAHO;AAIXC,MAAAA,aAAa,EAAER,UAAU,CAACO,GAAX,CAAe,eAAf,IACXP,UAAU,CAACO,GAAX,CAAe,eAAf,CADW,GAEX,EANO;AAOXE,MAAAA,QAAQ,EAAET,UAAU,CAACO,GAAX,CAAe,UAAf,IAA6BP,UAAU,CAACO,GAAX,CAAe,UAAf,CAA7B,GAA0D,EAPzD;AAQXG,MAAAA,cAAc,EAAEV,UAAU,CAACO,GAAX,CAAe,gBAAf,IACZP,UAAU,CAACO,GAAX,CAAe,gBAAf,CADY,GAEZ,EAVO;AAWXI,MAAAA,YAAY,EAAEX,UAAU,CAACO,GAAX,CAAe,cAAf,IACVP,UAAU,CAACO,GAAX,CAAe,cAAf,CADU,GAEV;AAbO,KAAb;AAeAZ,IAAAA,uBAAuB,CAACU,IAAD,CAAvB,CACGO,IADH,CACQ,YAAY;AAChBhB,MAAAA,cAAc,GACXgB,IADH,CACSC,GAAD,IAAS;AACb,YAAIA,GAAG,CAACC,OAAR,EAAiB;AACf,cAAID,GAAG,CAACE,QAAJ,CAAaC,SAAb,KAA2B,CAA/B,EAAkClB,OAAO,CAACmB,IAAR,CAAa,YAAb,EAAlC,KACK;AACHlB,YAAAA,WAAW,CAACc,GAAG,CAACE,QAAJ,CAAaC,SAAd,CAAX;AACAlB,YAAAA,OAAO,CAACmB,IAAR,CAAa,eAAb;AACD;AACF;AACF,OATH,EAUGC,KAVH,CAUUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAVlB;AAWD,KAbH,EAcGD,KAdH,CAcUC,GAAD,IAASC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAdlB;AAeD,GAhCQ,EAgCN,EAhCM,CAAT;AAkCA,sBACE,QAAC,cAAD;AACE,IAAA,MAAM,EAAE,IADV;AAEE,IAAA,OAAO,MAFT;AAGE,IAAA,IAAI,EAAC;AAHP;AAAA;AAAA;AAAA;AAAA,UADF;AAOD,CA7CD;;GAAMtB,oB;UACYJ,U;;;KADZI,oB;AA+CN,eAAeA,oBAAf","sourcesContent":["import { useEffect, useContext } from \"react\";\nimport { AppControlContext } from \"../context/AppControlContext\";\nimport { useHistory } from \"react-router-dom\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport addFreshbooksProfitLoss from \"../services/Freshbooks/AddFreshbooksProfitLoss\";\nimport getUserProfile from \"../services/Forms/getUserProfile\";\n\nconst FreshbooksMiddleware = () => {\n  const history = useHistory();\n  const { setFormStep } = useContext(AppControlContext);\n\n  useEffect(() => {\n    const queryParam = new URLSearchParams(window.location.search);\n    const data = {\n      company_name: queryParam.get(\"company_name\")\n        ? queryParam.get(\"company_name\")\n        : \"\",\n      currency_code: queryParam.get(\"currency_code\")\n        ? queryParam.get(\"currency_code\")\n        : \"\",\n      end_date: queryParam.get(\"end_date\") ? queryParam.get(\"end_date\") : \"\",\n      total_expenses: queryParam.get(\"total_expenses\")\n        ? queryParam.get(\"total_expenses\")\n        : \"\",\n      total_income: queryParam.get(\"total_income\")\n        ? queryParam.get(\"total_income\")\n        : \"\",\n    };\n    addFreshbooksProfitLoss(data)\n      .then(async () => {\n        getUserProfile()\n          .then((res) => {\n            if (res.success) {\n              if (res.response.form_step === 6) history.push(\"/dashboard\");\n              else {\n                setFormStep(res.response.form_step);\n                history.push(\"/registration\");\n              }\n            }\n          })\n          .catch((err) => console.log(err));\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  return (\n    <LoadingOverlay\n      active={true}\n      spinner\n      text=\"Adding Freshbooks Data to database...\"\n    ></LoadingOverlay>\n  );\n};\n\nexport default FreshbooksMiddleware;\n"]},"metadata":{},"sourceType":"module"}