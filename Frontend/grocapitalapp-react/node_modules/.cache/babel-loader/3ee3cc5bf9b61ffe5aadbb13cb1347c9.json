{"ast":null,"code":"var _jsxFileName = \"/home/mutahharahmadpersonal/Development/Gro Pakistan/Current/grocapitalapp-react/src/pages/Dashboard/index.jsx\",\n    _s = $RefreshSig$();\n\nimport { AppControlContext } from \"../../context/AppControlContext\";\nimport { useContext, useState, useEffect } from \"react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport NamePriceCard from \"../../components/Cards/NamePriceCard\";\nimport InformationCard from \"../../components/Cards/InformationCard\";\nimport AccountinginformationCard from \"../../components/Cards/AccountinginformationCard\";\nimport SideBar from \"../../components/SideBar/SideBar1\";\nimport NotificationPanel from \"../../components/Asides/Notification/NotificationPanel\";\nimport EditProfile from \"../../components/Asides/EditProfile/EditProfile\";\nimport PageOverlay from \"../../components/Overlay/PageOverlay\";\nimport StakeHolderPopup from \"../../components/Popups/StakeHolderPopup\";\nimport QuickBooksTable from \"./QuickBooksTable\";\nimport FreshBooksTable from \"./FreshBooksTable\";\nimport BankAuthTable from \"./BankAuthTable\"; // import AccountingButton from \"../../components/Buttons/AccountingButton\";\n\nimport { CompanyinformationData, PersonalinformationData, NamePriceCardData } from \"./util/InformationCardData\";\nimport { baseUrl } from \"../../services/util/baseUrl\";\nimport { GET_ALL_DATA_USER_URL } from \"../../services/util/urls\";\nimport ExperianScore from \"../../services/Experian/Score\";\nimport ExperianAuth from \"../../services/Experian/Auth\";\nimport getAssetsLiabilititesAndEquity from \"../../services/QuickBooks/GetAssetsLiabilititesAndEquity\";\nimport getFreshbooksProfitLoss from \"../../services/Freshbooks/GetFreshbooksProfitLoss\";\nimport { plaidBaseUrl } from \"../../services/util/baseUrl.js\";\nimport \"./Dashboard.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Dashboard = () => {\n  _s();\n\n  // document.body.style.overflowY = \"hidden\";\n  const {\n    notificationPanelState,\n    editProfileAsideState\n  } = useContext(AppControlContext);\n  const {\n    Form5,\n    setForm5State,\n    Form,\n    setFormState,\n    Form3,\n    setForm3State,\n    Form2,\n    setForm2State,\n    setFormStep,\n    setAvatar\n  } = useContext(AppControlContext);\n  const [stakeHolderPopupState, setStakeHolderPopupState] = useState(false);\n  const [dataFetched, setDataFetched] = useState(false);\n  const [dataMapped, setDataMapped] = useState(false);\n  const [experianAuthToken, setExperianAuthToken] = useState(\"\");\n  const [hasQuickBooksData, setHasQuickBooksData] = useState(false);\n  const [quickBooksData, setQuickBooksData] = useState({});\n  const [hasFreshBooksData, setHasFreshBooksData] = useState(false);\n  const [freshBooksData, setFreshBooksData] = useState({});\n  const [bankingAuthData, setBankingAuthData] = useState([]);\n  setFormStep(0); // const QuickBooksPopup = () => {\n  //   let parameters = \"location=1,width=800,height=650\";\n  //   parameters +=\n  //     \",left=\" +\n  //     (window.screen.width - 800) / 2 +\n  //     \",top=\" +\n  //     (window.screen.height - 650) / 2;\n  //   window.open(\n  //     process.env.NODE_ENV === \"development\"\n  //       ? \"http://localhost:8000/intuit/oauth\"\n  //       : \"https://backend.grocapitalapp.com/intuit/oauth\",\n  //     \"connectPopupQuickbooks\",\n  //     parameters\n  //   );\n  // };\n  // const FreshbooksPopup = () => {\n  //   let parameters = \"location=1,width=800,height=650\";\n  //   parameters +=\n  //     \",left=\" +\n  //     (window.screen.width - 800) / 2 +\n  //     \",top=\" +\n  //     (window.screen.height - 650) / 2;\n  //   window.open(\n  //     process.env.NODE_ENV === \"development\"\n  //       ? \"http://localhost:8000/freshbooks_app/oauth\"\n  //       : \"https://backend.grocapitalapp.com/freshbooks_app/oauth\",\n  //     \"connectPopupFreshbooks\",\n  //     parameters\n  //   );\n  // };\n\n  const StakeHolderPopupHandler = () => {\n    setStakeHolderPopupState(!stakeHolderPopupState);\n  };\n\n  const handleDunsChange = ExpersianScore => {\n    setForm2State({ ...Form2,\n      Experian: ExpersianScore\n    });\n  };\n\n  useEffect(() => {\n    if (notificationPanelState || editProfileAsideState) {\n      document.body.classList.add(\"sidebar-visible\");\n    } else document.body.classList.remove(\"sidebar-visible\");\n  }, [notificationPanelState, editProfileAsideState]);\n  useEffect(() => {\n    const mapAllUserDataToContext = async data => {\n      setForm5State({ ...Form5,\n        YTDRevenue: parseInt(data.ytd_revenue) + \"\",\n        YTDProfit: parseInt(data.ytd_profit) + \"\",\n        CurrentAR: parseInt(data.current_ar) + \"\",\n        CurrentAP: parseInt(data.current_ap) + \"\",\n        CurrentBankBalance: parseInt(data.current_bank_balance) + \"\"\n      });\n      setFormState({ ...Form,\n        FName: data.first_name,\n        LName: data.last_name,\n        Email: data.email\n      });\n      setForm3State({ ...Form3,\n        SocialSecurityNumber: data.social_security_number,\n        Birthday: data.birthday\n      });\n      await setForm2State({ ...Form2,\n        DUNS: data.duns,\n        BusinessPhysicalAddress: data.business_physical_address,\n        City: data.city,\n        State: data.state,\n        Zip: data.zip,\n        CorporateName: data.corporate_name,\n        EIN: data.ein\n      });\n      setAvatar(data.avatar);\n    };\n\n    if (!dataFetched) {\n      fetch(baseUrl() + GET_ALL_DATA_USER_URL, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.getItem(\"token\")}`\n        }\n      }).then(res => res.json()).then(response => {\n        setDataFetched(true);\n        mapAllUserDataToContext(response); // setDataMapped(true);\n      }).then(() => setExperianAuthToken(\"True\")).catch(err => {\n        console.log(err);\n        setDataMapped(true);\n      });\n    }\n  }, [dataFetched, Form, Form2, Form3, Form5, setFormState, setForm2State, setForm3State, setForm5State, setAvatar]);\n  useEffect(() => {\n    if (experianAuthToken !== \"\" && !dataMapped) {\n      ExperianScore().then(response => setForm2State({ ...Form2,\n        Experian: response.score ? response.score + \"/800\" : \"\"\n      })).then(() => setDataMapped(true)).catch(err => {\n        console.log(err);\n        setDataMapped(true);\n      });\n    }\n  }, [experianAuthToken, Form2, setForm2State, dataMapped]);\n  useEffect(() => {\n    getAssetsLiabilititesAndEquity().then(res => {\n      if (res.success) {\n        if (res.payload[0]) {\n          setHasQuickBooksData(true);\n          setQuickBooksData(res.payload[0]);\n        }\n      }\n    }).catch(err => console.error(err));\n  }, []);\n  useEffect(() => {\n    getFreshbooksProfitLoss().then(res => {\n      if (res.success) {\n        if (res.payload[0]) {\n          setHasFreshBooksData(true);\n          setFreshBooksData(res.payload[0]);\n        }\n      }\n    }).catch(err => console.error(err));\n  }, []);\n  useEffect(() => {\n    const getBankingAutData = async () => {\n      const bankingAuthData_ = await fetch(plaidBaseUrl() + \"banking-auth/\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const response = await bankingAuthData_.json();\n      setBankingAuthData(response);\n    };\n\n    getBankingAutData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n    active: !dataMapped,\n    spinner: true,\n    text: \"Fetching Data...\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"dashboard-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"dashboard\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrap\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dashboard__row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dashboard__content dashboard__content--sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: NamePriceCardData.map((data, index) => {\n                  return /*#__PURE__*/_jsxDEV(NamePriceCard, {\n                    name: data.name,\n                    title: data.title,\n                    price: Form5[data.name],\n                    fullWidth: index + 1 === NamePriceCardData.length\n                  }, data.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 23\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this), [{\n                title: \"Personal Information\",\n                data: PersonalinformationData\n              }, {\n                title: \"Company Information\",\n                data: CompanyinformationData\n              }].map((card, index) => {\n                return /*#__PURE__*/_jsxDEV(InformationCard, {\n                  title: card.title,\n                  data: card.data,\n                  callback: handleDunsChange,\n                  authToken: experianAuthToken\n                }, dataMapped + card.title, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 21\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(BankAuthTable, {\n                bankingAuthData: bankingAuthData\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"white-box--mb\",\n                children: /*#__PURE__*/_jsxDEV(AccountinginformationCard, {\n                  onclick: StakeHolderPopupHandler\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 17\n              }, this), hasQuickBooksData && /*#__PURE__*/_jsxDEV(QuickBooksTable, {\n                quickBooksData: quickBooksData\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 19\n              }, this), hasFreshBooksData && /*#__PURE__*/_jsxDEV(FreshBooksTable, {\n                freshBooksData: freshBooksData\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 316,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SideBar, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PageOverlay, {\n        activeState: notificationPanelState || editProfileAsideState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NotificationPanel, {\n        activeState: notificationPanelState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditProfile, {\n        activeState: editProfileAsideState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StakeHolderPopup, {\n        activeState: stakeHolderPopupState,\n        onclick: StakeHolderPopupHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dashboard, \"/gu/7fa/unzaMylreG1gNIqHbGU=\");\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/home/mutahharahmadpersonal/Development/Gro Pakistan/Current/grocapitalapp-react/src/pages/Dashboard/index.jsx"],"names":["AppControlContext","useContext","useState","useEffect","LoadingOverlay","NamePriceCard","InformationCard","AccountinginformationCard","SideBar","NotificationPanel","EditProfile","PageOverlay","StakeHolderPopup","QuickBooksTable","FreshBooksTable","BankAuthTable","CompanyinformationData","PersonalinformationData","NamePriceCardData","baseUrl","GET_ALL_DATA_USER_URL","ExperianScore","ExperianAuth","getAssetsLiabilititesAndEquity","getFreshbooksProfitLoss","plaidBaseUrl","Dashboard","notificationPanelState","editProfileAsideState","Form5","setForm5State","Form","setFormState","Form3","setForm3State","Form2","setForm2State","setFormStep","setAvatar","stakeHolderPopupState","setStakeHolderPopupState","dataFetched","setDataFetched","dataMapped","setDataMapped","experianAuthToken","setExperianAuthToken","hasQuickBooksData","setHasQuickBooksData","quickBooksData","setQuickBooksData","hasFreshBooksData","setHasFreshBooksData","freshBooksData","setFreshBooksData","bankingAuthData","setBankingAuthData","StakeHolderPopupHandler","handleDunsChange","ExpersianScore","Experian","document","body","classList","add","remove","mapAllUserDataToContext","data","YTDRevenue","parseInt","ytd_revenue","YTDProfit","ytd_profit","CurrentAR","current_ar","CurrentAP","current_ap","CurrentBankBalance","current_bank_balance","FName","first_name","LName","last_name","Email","email","SocialSecurityNumber","social_security_number","Birthday","birthday","DUNS","duns","BusinessPhysicalAddress","business_physical_address","City","city","State","state","Zip","zip","CorporateName","corporate_name","EIN","ein","avatar","fetch","method","headers","Authorization","localStorage","getItem","then","res","json","response","catch","err","console","log","score","success","payload","error","getBankingAutData","bankingAuthData_","map","index","name","title","length","id","card"],"mappings":";;;AAAA,SAASA,iBAAT,QAAkC,iCAAlC;AACA,SAASC,UAAT,EAAqBC,QAArB,EAA+BC,SAA/B,QAAgD,OAAhD;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,OAAOC,aAAP,MAA0B,sCAA1B;AACA,OAAOC,eAAP,MAA4B,wCAA5B;AACA,OAAOC,yBAAP,MAAsC,kDAAtC;AACA,OAAOC,OAAP,MAAoB,mCAApB;AACA,OAAOC,iBAAP,MAA8B,wDAA9B;AACA,OAAOC,WAAP,MAAwB,iDAAxB;AACA,OAAOC,WAAP,MAAwB,sCAAxB;AACA,OAAOC,gBAAP,MAA6B,0CAA7B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,aAAP,MAA0B,iBAA1B,C,CACA;;AACA,SACEC,sBADF,EAEEC,uBAFF,EAGEC,iBAHF,QAIO,4BAJP;AAKA,SAASC,OAAT,QAAwB,6BAAxB;AACA,SAASC,qBAAT,QAAsC,0BAAtC;AACA,OAAOC,aAAP,MAA0B,+BAA1B;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,8BAAP,MAA2C,0DAA3C;AACA,OAAOC,uBAAP,MAAoC,mDAApC;AACA,SAASC,YAAT,QAA6B,gCAA7B;AACA,OAAO,kBAAP;;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AACtB;AACA,QAAM;AAAEC,IAAAA,sBAAF;AAA0BC,IAAAA;AAA1B,MACJ3B,UAAU,CAACD,iBAAD,CADZ;AAEA,QAAM;AACJ6B,IAAAA,KADI;AAEJC,IAAAA,aAFI;AAGJC,IAAAA,IAHI;AAIJC,IAAAA,YAJI;AAKJC,IAAAA,KALI;AAMJC,IAAAA,aANI;AAOJC,IAAAA,KAPI;AAQJC,IAAAA,aARI;AASJC,IAAAA,WATI;AAUJC,IAAAA;AAVI,MAWFrC,UAAU,CAACD,iBAAD,CAXd;AAYA,QAAM,CAACuC,qBAAD,EAAwBC,wBAAxB,IAAoDtC,QAAQ,CAAC,KAAD,CAAlE;AACA,QAAM,CAACuC,WAAD,EAAcC,cAAd,IAAgCxC,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAACyC,UAAD,EAAaC,aAAb,IAA8B1C,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAAC2C,iBAAD,EAAoBC,oBAApB,IAA4C5C,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAAC6C,iBAAD,EAAoBC,oBAApB,IAA4C9C,QAAQ,CAAC,KAAD,CAA1D;AACA,QAAM,CAAC+C,cAAD,EAAiBC,iBAAjB,IAAsChD,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACiD,iBAAD,EAAoBC,oBAApB,IAA4ClD,QAAQ,CAAC,KAAD,CAA1D;AACA,QAAM,CAACmD,cAAD,EAAiBC,iBAAjB,IAAsCpD,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACqD,eAAD,EAAkBC,kBAAlB,IAAwCtD,QAAQ,CAAC,EAAD,CAAtD;AAEAmC,EAAAA,WAAW,CAAC,CAAD,CAAX,CA1BsB,CA4BtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAMoB,uBAAuB,GAAG,MAAM;AACpCjB,IAAAA,wBAAwB,CAAC,CAACD,qBAAF,CAAxB;AACD,GAFD;;AAIA,QAAMmB,gBAAgB,GAAIC,cAAD,IAAoB;AAC3CvB,IAAAA,aAAa,CAAC,EACZ,GAAGD,KADS;AAEZyB,MAAAA,QAAQ,EAACD;AAFG,KAAD,CAAb;AAID,GALD;;AAOAxD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIwB,sBAAsB,IAAIC,qBAA9B,EAAqD;AACnDiC,MAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,iBAA5B;AACD,KAFD,MAEOH,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+B,iBAA/B;AACR,GAJQ,EAIN,CAACtC,sBAAD,EAAyBC,qBAAzB,CAJM,CAAT;AAMAzB,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM+D,uBAAuB,GAAG,MAAOC,IAAP,IAAgB;AAC9CrC,MAAAA,aAAa,CAAC,EACZ,GAAGD,KADS;AAEZuC,QAAAA,UAAU,EAAEC,QAAQ,CAACF,IAAI,CAACG,WAAN,CAAR,GAA6B,EAF7B;AAGZC,QAAAA,SAAS,EAAEF,QAAQ,CAACF,IAAI,CAACK,UAAN,CAAR,GAA4B,EAH3B;AAIZC,QAAAA,SAAS,EAAEJ,QAAQ,CAACF,IAAI,CAACO,UAAN,CAAR,GAA4B,EAJ3B;AAKZC,QAAAA,SAAS,EAAEN,QAAQ,CAACF,IAAI,CAACS,UAAN,CAAR,GAA4B,EAL3B;AAMZC,QAAAA,kBAAkB,EAAER,QAAQ,CAACF,IAAI,CAACW,oBAAN,CAAR,GAAsC;AAN9C,OAAD,CAAb;AASA9C,MAAAA,YAAY,CAAC,EACX,GAAGD,IADQ;AAEXgD,QAAAA,KAAK,EAAEZ,IAAI,CAACa,UAFD;AAGXC,QAAAA,KAAK,EAAEd,IAAI,CAACe,SAHD;AAIXC,QAAAA,KAAK,EAAEhB,IAAI,CAACiB;AAJD,OAAD,CAAZ;AAOAlD,MAAAA,aAAa,CAAC,EACZ,GAAGD,KADS;AAEZoD,QAAAA,oBAAoB,EAAElB,IAAI,CAACmB,sBAFf;AAGZC,QAAAA,QAAQ,EAAEpB,IAAI,CAACqB;AAHH,OAAD,CAAb;AAMA,YAAMpD,aAAa,CAAC,EAClB,GAAGD,KADe;AAElBsD,QAAAA,IAAI,EAAEtB,IAAI,CAACuB,IAFO;AAGlBC,QAAAA,uBAAuB,EAAExB,IAAI,CAACyB,yBAHZ;AAIlBC,QAAAA,IAAI,EAAE1B,IAAI,CAAC2B,IAJO;AAKlBC,QAAAA,KAAK,EAAE5B,IAAI,CAAC6B,KALM;AAMlBC,QAAAA,GAAG,EAAE9B,IAAI,CAAC+B,GANQ;AAOlBC,QAAAA,aAAa,EAAEhC,IAAI,CAACiC,cAPF;AAQlBC,QAAAA,GAAG,EAAElC,IAAI,CAACmC;AARQ,OAAD,CAAnB;AAWAhE,MAAAA,SAAS,CAAC6B,IAAI,CAACoC,MAAN,CAAT;AACD,KAnCD;;AAqCA,QAAI,CAAC9D,WAAL,EAAkB;AAChB+D,MAAAA,KAAK,CAACrF,OAAO,KAAKC,qBAAb,EAAoC;AACvCqF,QAAAA,MAAM,EAAE,KAD+B;AAEvCC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,SAAQC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAF/C;AAF8B,OAApC,CAAL,CAOGC,IAPH,CAOSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAPjB,EAQGF,IARH,CAQSG,QAAD,IAAc;AAClBvE,QAAAA,cAAc,CAAC,IAAD,CAAd;AACAwB,QAAAA,uBAAuB,CAAC+C,QAAD,CAAvB,CAFkB,CAGlB;AACD,OAZH,EAaGH,IAbH,CAaQ,MAAMhE,oBAAoB,CAAC,MAAD,CAblC,EAcGoE,KAdH,CAcUC,GAAD,IAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAvE,QAAAA,aAAa,CAAC,IAAD,CAAb;AACD,OAjBH;AAkBD;AACF,GA1DQ,EA0DN,CACDH,WADC,EAEDV,IAFC,EAGDI,KAHC,EAIDF,KAJC,EAKDJ,KALC,EAMDG,YANC,EAODI,aAPC,EAQDF,aARC,EASDJ,aATC,EAUDQ,SAVC,CA1DM,CAAT;AAuEAnC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI0C,iBAAiB,KAAK,EAAtB,IAA4B,CAACF,UAAjC,EAA6C;AAC3CtB,MAAAA,aAAa,GACVyF,IADH,CACSG,QAAD,IACJ7E,aAAa,CAAC,EACZ,GAAGD,KADS;AAEZyB,QAAAA,QAAQ,EAAEqD,QAAQ,CAACK,KAAT,GACNL,QAAQ,CAACK,KAAT,GAAiB,MADX,GAEN;AAJQ,OAAD,CAFjB,EASGR,IATH,CASQ,MAAMlE,aAAa,CAAC,IAAD,CAT3B,EAUGsE,KAVH,CAUUC,GAAD,IAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACAvE,QAAAA,aAAa,CAAC,IAAD,CAAb;AACD,OAbH;AAcD;AACF,GAjBQ,EAiBN,CAACC,iBAAD,EAAoBV,KAApB,EAA2BC,aAA3B,EAA0CO,UAA1C,CAjBM,CAAT;AAmBAxC,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,8BAA8B,GAC3BuF,IADH,CACSC,GAAD,IAAS;AACb,UAAIA,GAAG,CAACQ,OAAR,EAAiB;AACf,YAAIR,GAAG,CAACS,OAAJ,CAAY,CAAZ,CAAJ,EAAoB;AAClBxE,UAAAA,oBAAoB,CAAC,IAAD,CAApB;AACAE,UAAAA,iBAAiB,CAAC6D,GAAG,CAACS,OAAJ,CAAY,CAAZ,CAAD,CAAjB;AACD;AACF;AACF,KARH,EASGN,KATH,CASUC,GAAD,IAASC,OAAO,CAACK,KAAR,CAAcN,GAAd,CATlB;AAUD,GAXQ,EAWN,EAXM,CAAT;AAaAhH,EAAAA,SAAS,CAAC,MAAM;AACdqB,IAAAA,uBAAuB,GACpBsF,IADH,CACSC,GAAD,IAAS;AACb,UAAIA,GAAG,CAACQ,OAAR,EAAiB;AACf,YAAIR,GAAG,CAACS,OAAJ,CAAY,CAAZ,CAAJ,EAAoB;AAClBpE,UAAAA,oBAAoB,CAAC,IAAD,CAApB;AACAE,UAAAA,iBAAiB,CAACyD,GAAG,CAACS,OAAJ,CAAY,CAAZ,CAAD,CAAjB;AACD;AACF;AACF,KARH,EASGN,KATH,CASUC,GAAD,IAASC,OAAO,CAACK,KAAR,CAAcN,GAAd,CATlB;AAUD,GAXQ,EAWN,EAXM,CAAT;AAaAhH,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMuH,iBAAiB,GAAG,YAAY;AACpC,YAAMC,gBAAgB,GAAG,MAAMnB,KAAK,CAAC/E,YAAY,KAAK,eAAlB,EAAmC;AACrEgF,QAAAA,MAAM,EAAE,KAD6D;AAErEC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,SAAQC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAF/C;AAF4D,OAAnC,CAApC;AAQA,YAAMI,QAAQ,GAAG,MAAMU,gBAAgB,CAACX,IAAjB,EAAvB;AACAxD,MAAAA,kBAAkB,CAACyD,QAAD,CAAlB;AACD,KAXD;;AAaAS,IAAAA,iBAAiB;AAClB,GAfQ,EAeN,EAfM,CAAT;AAiBA,sBACE,QAAC,cAAD;AAAgB,IAAA,MAAM,EAAE,CAAC/E,UAAzB;AAAqC,IAAA,OAAO,MAA5C;AAA6C,IAAA,IAAI,EAAC,kBAAlD;AAAA,2BACE;AAAK,MAAA,EAAE,EAAC,gBAAR;AAAA,8BACE;AAAS,QAAA,SAAS,EAAC,WAAnB;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,gBAAf;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,2CAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,KAAf;AAAA,0BACGzB,iBAAiB,CAAC0G,GAAlB,CAAsB,CAACzD,IAAD,EAAO0D,KAAP,KAAiB;AACtC,sCACE,QAAC,aAAD;AACE,oBAAA,IAAI,EAAE1D,IAAI,CAAC2D,IADb;AAEE,oBAAA,KAAK,EAAE3D,IAAI,CAAC4D,KAFd;AAGE,oBAAA,KAAK,EAAElG,KAAK,CAACsC,IAAI,CAAC2D,IAAN,CAHd;AAKE,oBAAA,SAAS,EAAED,KAAK,GAAG,CAAR,KAAc3G,iBAAiB,CAAC8G;AAL7C,qBAIO7D,IAAI,CAAC8D,EAJZ;AAAA;AAAA;AAAA;AAAA,0BADF;AASD,iBAVA;AADH;AAAA;AAAA;AAAA;AAAA,sBADF,EAeG,CACC;AACEF,gBAAAA,KAAK,EAAE,sBADT;AAEE5D,gBAAAA,IAAI,EAAElD;AAFR,eADD,EAKC;AACE8G,gBAAAA,KAAK,EAAE,qBADT;AAEE5D,gBAAAA,IAAI,EAAEnD;AAFR,eALD,EASC4G,GATD,CASK,CAACM,IAAD,EAAOL,KAAP,KAAiB;AACrB,oCACE,QAAC,eAAD;AACE,kBAAA,KAAK,EAAEK,IAAI,CAACH,KADd;AAEE,kBAAA,IAAI,EAAEG,IAAI,CAAC/D,IAFb;AAIE,kBAAA,QAAQ,EAAET,gBAJZ;AAKE,kBAAA,SAAS,EAAEb;AALb,mBAGOF,UAAU,GAAGuF,IAAI,CAACH,KAHzB;AAAA;AAAA;AAAA;AAAA,wBADF;AASD,eAnBA,CAfH,eAoCE,QAAC,aAAD;AAAe,gBAAA,eAAe,EAAExE;AAAhC;AAAA;AAAA;AAAA;AAAA,sBApCF,eAsCE;AAAK,gBAAA,SAAS,EAAC,eAAf;AAAA,uCACE,QAAC,yBAAD;AACE,kBAAA,OAAO,EAAEE;AADX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAtCF,EAkEGV,iBAAiB,iBAChB,QAAC,eAAD;AAAiB,gBAAA,cAAc,EAAEE;AAAjC;AAAA;AAAA;AAAA;AAAA,sBAnEJ,EAqEGE,iBAAiB,iBAChB,QAAC,eAAD;AAAiB,gBAAA,cAAc,EAAEE;AAAjC;AAAA;AAAA;AAAA;AAAA,sBAtEJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eA0EE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,oBA1EF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAiFE,QAAC,WAAD;AACE,QAAA,WAAW,EAAE1B,sBAAsB,IAAIC;AADzC;AAAA;AAAA;AAAA;AAAA,cAjFF,eAoFE,QAAC,iBAAD;AAAmB,QAAA,WAAW,EAAED;AAAhC;AAAA;AAAA;AAAA;AAAA,cApFF,eAqFE,QAAC,WAAD;AAAa,QAAA,WAAW,EAAEC;AAA1B;AAAA;AAAA;AAAA;AAAA,cArFF,eAsFE,QAAC,gBAAD;AACE,QAAA,WAAW,EAAEW,qBADf;AAEE,QAAA,OAAO,EAAEkB;AAFX;AAAA;AAAA;AAAA;AAAA,cAtFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AA+FD,CAjTD;;GAAM/B,S;;KAAAA,S;AAmTN,eAAeA,SAAf","sourcesContent":["import { AppControlContext } from \"../../context/AppControlContext\";\nimport { useContext, useState, useEffect } from \"react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport NamePriceCard from \"../../components/Cards/NamePriceCard\";\nimport InformationCard from \"../../components/Cards/InformationCard\";\nimport AccountinginformationCard from \"../../components/Cards/AccountinginformationCard\";\nimport SideBar from \"../../components/SideBar/SideBar1\";\nimport NotificationPanel from \"../../components/Asides/Notification/NotificationPanel\";\nimport EditProfile from \"../../components/Asides/EditProfile/EditProfile\";\nimport PageOverlay from \"../../components/Overlay/PageOverlay\";\nimport StakeHolderPopup from \"../../components/Popups/StakeHolderPopup\";\nimport QuickBooksTable from \"./QuickBooksTable\";\nimport FreshBooksTable from \"./FreshBooksTable\";\nimport BankAuthTable from \"./BankAuthTable\";\n// import AccountingButton from \"../../components/Buttons/AccountingButton\";\nimport {\n  CompanyinformationData,\n  PersonalinformationData,\n  NamePriceCardData,\n} from \"./util/InformationCardData\";\nimport { baseUrl } from \"../../services/util/baseUrl\";\nimport { GET_ALL_DATA_USER_URL } from \"../../services/util/urls\";\nimport ExperianScore from \"../../services/Experian/Score\";\nimport ExperianAuth from \"../../services/Experian/Auth\";\nimport getAssetsLiabilititesAndEquity from \"../../services/QuickBooks/GetAssetsLiabilititesAndEquity\";\nimport getFreshbooksProfitLoss from \"../../services/Freshbooks/GetFreshbooksProfitLoss\";\nimport { plaidBaseUrl } from \"../../services/util/baseUrl.js\";\nimport \"./Dashboard.scss\";\n\nconst Dashboard = () => {\n  // document.body.style.overflowY = \"hidden\";\n  const { notificationPanelState, editProfileAsideState } =\n    useContext(AppControlContext);\n  const {\n    Form5,\n    setForm5State,\n    Form,\n    setFormState,\n    Form3,\n    setForm3State,\n    Form2,\n    setForm2State,\n    setFormStep,\n    setAvatar,\n  } = useContext(AppControlContext);\n  const [stakeHolderPopupState, setStakeHolderPopupState] = useState(false);\n  const [dataFetched, setDataFetched] = useState(false);\n  const [dataMapped, setDataMapped] = useState(false);\n  const [experianAuthToken, setExperianAuthToken] = useState(\"\");\n  const [hasQuickBooksData, setHasQuickBooksData] = useState(false);\n  const [quickBooksData, setQuickBooksData] = useState({});\n  const [hasFreshBooksData, setHasFreshBooksData] = useState(false);\n  const [freshBooksData, setFreshBooksData] = useState({});\n  const [bankingAuthData, setBankingAuthData] = useState([]);\n\n  setFormStep(0);\n\n  // const QuickBooksPopup = () => {\n  //   let parameters = \"location=1,width=800,height=650\";\n  //   parameters +=\n  //     \",left=\" +\n  //     (window.screen.width - 800) / 2 +\n  //     \",top=\" +\n  //     (window.screen.height - 650) / 2;\n  //   window.open(\n  //     process.env.NODE_ENV === \"development\"\n  //       ? \"http://localhost:8000/intuit/oauth\"\n  //       : \"https://backend.grocapitalapp.com/intuit/oauth\",\n  //     \"connectPopupQuickbooks\",\n  //     parameters\n  //   );\n  // };\n\n  // const FreshbooksPopup = () => {\n  //   let parameters = \"location=1,width=800,height=650\";\n  //   parameters +=\n  //     \",left=\" +\n  //     (window.screen.width - 800) / 2 +\n  //     \",top=\" +\n  //     (window.screen.height - 650) / 2;\n  //   window.open(\n  //     process.env.NODE_ENV === \"development\"\n  //       ? \"http://localhost:8000/freshbooks_app/oauth\"\n  //       : \"https://backend.grocapitalapp.com/freshbooks_app/oauth\",\n  //     \"connectPopupFreshbooks\",\n  //     parameters\n  //   );\n  // };\n\n  const StakeHolderPopupHandler = () => {\n    setStakeHolderPopupState(!stakeHolderPopupState);\n  };\n\n  const handleDunsChange = (ExpersianScore) => {\n    setForm2State({\n      ...Form2,\n      Experian:ExpersianScore\n    });\n  };\n\n  useEffect(() => {\n    if (notificationPanelState || editProfileAsideState) {\n      document.body.classList.add(\"sidebar-visible\");\n    } else document.body.classList.remove(\"sidebar-visible\");\n  }, [notificationPanelState, editProfileAsideState]);\n\n  useEffect(() => {\n    const mapAllUserDataToContext = async (data) => {\n      setForm5State({\n        ...Form5,\n        YTDRevenue: parseInt(data.ytd_revenue) + \"\",\n        YTDProfit: parseInt(data.ytd_profit) + \"\",\n        CurrentAR: parseInt(data.current_ar) + \"\",\n        CurrentAP: parseInt(data.current_ap) + \"\",\n        CurrentBankBalance: parseInt(data.current_bank_balance) + \"\",\n      });\n\n      setFormState({\n        ...Form,\n        FName: data.first_name,\n        LName: data.last_name,\n        Email: data.email,\n      });\n\n      setForm3State({\n        ...Form3,\n        SocialSecurityNumber: data.social_security_number,\n        Birthday: data.birthday,\n      });\n\n      await setForm2State({\n        ...Form2,\n        DUNS: data.duns,\n        BusinessPhysicalAddress: data.business_physical_address,\n        City: data.city,\n        State: data.state,\n        Zip: data.zip,\n        CorporateName: data.corporate_name,\n        EIN: data.ein\n      });\n\n      setAvatar(data.avatar);\n    };\n\n    if (!dataFetched) {\n      fetch(baseUrl() + GET_ALL_DATA_USER_URL, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.getItem(\"token\")}`,\n        },\n      })\n        .then((res) => res.json())\n        .then((response) => {\n          setDataFetched(true);\n          mapAllUserDataToContext(response);\n          // setDataMapped(true);\n        })\n        .then(() => setExperianAuthToken(\"True\"))\n        .catch((err) => {\n          console.log(err);\n          setDataMapped(true)\n        });\n    }\n  }, [\n    dataFetched,\n    Form,\n    Form2,\n    Form3,\n    Form5,\n    setFormState,\n    setForm2State,\n    setForm3State,\n    setForm5State,\n    setAvatar\n  ]);\n\n  useEffect(() => {\n    if (experianAuthToken !== \"\" && !dataMapped) {\n      ExperianScore()\n        .then((response) =>\n          setForm2State({\n            ...Form2,\n            Experian: response.score\n              ? response.score + \"/800\"\n              : \"\",\n          })\n        )\n        .then(() => setDataMapped(true))\n        .catch((err) => {\n          console.log(err);\n          setDataMapped(true)\n        });\n    }\n  }, [experianAuthToken, Form2, setForm2State, dataMapped]);\n\n  useEffect(() => {\n    getAssetsLiabilititesAndEquity()\n      .then((res) => {\n        if (res.success) {\n          if (res.payload[0]) {\n            setHasQuickBooksData(true);\n            setQuickBooksData(res.payload[0]);\n          }\n        }\n      })\n      .catch((err) => console.error(err));\n  }, []);\n\n  useEffect(() => {\n    getFreshbooksProfitLoss()\n      .then((res) => {\n        if (res.success) {\n          if (res.payload[0]) {\n            setHasFreshBooksData(true);\n            setFreshBooksData(res.payload[0]);\n          }\n        }\n      })\n      .catch((err) => console.error(err));\n  }, []);\n\n  useEffect(() => {\n    const getBankingAutData = async () => {\n      const bankingAuthData_ = await fetch(plaidBaseUrl() + \"banking-auth/\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.getItem(\"token\")}`,\n        },\n      });\n\n      const response = await bankingAuthData_.json();\n      setBankingAuthData(response);\n    };\n\n    getBankingAutData();\n  }, []);\n\n  return (\n    <LoadingOverlay active={!dataMapped} spinner text=\"Fetching Data...\">\n      <div id=\"dashboard-page\">\n        <section className=\"dashboard\">\n          <div className=\"wrap\">\n            <div className=\"dashboard__row\">\n              <div className=\"dashboard__content dashboard__content--sm\">\n                <div className=\"row\">\n                  {NamePriceCardData.map((data, index) => {\n                    return (\n                      <NamePriceCard\n                        name={data.name}\n                        title={data.title}\n                        price={Form5[data.name]}\n                        key={data.id}\n                        fullWidth={index + 1 === NamePriceCardData.length}\n                      />\n                    );\n                  })}\n                </div>\n\n                {[\n                  {\n                    title: \"Personal Information\",\n                    data: PersonalinformationData,\n                  },\n                  {\n                    title: \"Company Information\",\n                    data: CompanyinformationData,\n                  },\n                ].map((card, index) => {\n                  return (\n                    <InformationCard\n                      title={card.title}\n                      data={card.data}\n                      key={dataMapped + card.title}\n                      callback={handleDunsChange}\n                      authToken={experianAuthToken}\n                    />\n                  );\n                })}\n\n                <BankAuthTable bankingAuthData={bankingAuthData} />\n\n                <div className=\"white-box--mb\">\n                  <AccountinginformationCard\n                    onclick={StakeHolderPopupHandler}\n                  />\n                </div>\n\n                {/* <div\n                  style={{\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    width: \"50%\",\n                    paddingRight: \"10px\",\n                  }}\n                >\n                  {!hasQuickBooksData && (\n                    <AccountingButton\n                      onClick={QuickBooksPopup}\n                      name=\"QuickBooks\"\n                    />\n                  )}\n                  {!hasFreshBooksData && (\n                    <AccountingButton\n                      onClick={FreshbooksPopup}\n                      name=\"Freshbooks\"\n                    />\n                  )}\n                </div> */}\n\n                {hasQuickBooksData && (\n                  <QuickBooksTable quickBooksData={quickBooksData} />\n                )}\n                {hasFreshBooksData && (\n                  <FreshBooksTable freshBooksData={freshBooksData} />\n                )}\n              </div>\n              <SideBar />\n            </div>\n          </div>\n        </section>\n        <PageOverlay\n          activeState={notificationPanelState || editProfileAsideState}\n        />\n        <NotificationPanel activeState={notificationPanelState} />\n        <EditProfile activeState={editProfileAsideState} />\n        <StakeHolderPopup\n          activeState={stakeHolderPopupState}\n          onclick={StakeHolderPopupHandler}\n        />\n      </div>\n    </LoadingOverlay>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}