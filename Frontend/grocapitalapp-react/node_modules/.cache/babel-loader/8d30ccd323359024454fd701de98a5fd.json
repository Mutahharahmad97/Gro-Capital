{"ast":null,"code":"var _jsxFileName = \"/home/mutahharahmadpersonal/Development/Gro Pakistan/Current/grocapitalapp-react/src/pages/Dashboard/index.jsx\",\n    _s = $RefreshSig$();\n\nimport { AppControlContext } from \"../../context/AppControlContext\";\nimport { useContext, useState, useEffect } from \"react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport NamePriceCard from \"../../components/Cards/NamePriceCard\";\nimport InformationCard from \"../../components/Cards/InformationCard\";\nimport AccountinginformationCard from \"../../components/Cards/AccountinginformationCard\";\nimport SideBar from \"../../components/SideBar/SideBar1\";\nimport NotificationPanel from \"../../components/Asides/Notification/NotificationPanel\";\nimport EditProfile from \"../../components/Asides/EditProfile/EditProfile\";\nimport PageOverlay from \"../../components/Overlay/PageOverlay\";\nimport StakeHolderPopup from \"../../components/Popups/StakeHolderPopup\";\nimport QuickBooksTable from \"./QuickBooksTable\";\nimport FreshBooksTable from \"./FreshBooksTable\";\nimport BankAuthTable from \"./BankAuthTable\";\nimport CompanyPopup from '../../components/Popups/CompanyPopup'; // import AccountingButton from \"../../components/Buttons/AccountingButton\";\n\nimport { CompanyinformationData, PersonalinformationData, NamePriceCardData } from \"./util/InformationCardData\";\nimport { baseUrl } from \"../../services/util/baseUrl\";\nimport { GET_ALL_DATA_USER_URL } from \"../../services/util/urls\";\nimport ExperianScore from \"../../services/Experian/Score\";\nimport ExperianAuth from \"../../services/Experian/Auth\";\nimport ConsumerCreditScore from '../../services/CRS/consumerCreditScore';\nimport getAssetsLiabilititesAndEquity from \"../../services/QuickBooks/GetAssetsLiabilititesAndEquity\";\nimport getFreshbooksProfitLoss from \"../../services/Freshbooks/GetFreshbooksProfitLoss\";\nimport { plaidBaseUrl } from \"../../services/util/baseUrl.js\";\nimport \"./Dashboard.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Dashboard = () => {\n  _s();\n\n  // document.body.style.overflowY = \"hidden\";\n  const {\n    notificationPanelState,\n    editProfileAsideState\n  } = useContext(AppControlContext);\n  const {\n    Form5,\n    setForm5State,\n    Form4,\n    setForm4State,\n    Form,\n    setFormState,\n    Form3,\n    setForm3State,\n    Form2,\n    setForm2State,\n    setFormStep,\n    setAvatar\n  } = useContext(AppControlContext);\n  const [stakeHolderPopupState, setStakeHolderPopupState] = useState(false);\n  const [dataFetched, setDataFetched] = useState(false);\n  const [dataMapped, setDataMapped] = useState(false);\n  const [experianAuthToken, setExperianAuthToken] = useState(\"\");\n  const [hasQuickBooksData, setHasQuickBooksData] = useState(false);\n  const [quickBooksData, setQuickBooksData] = useState({});\n  const [hasFreshBooksData, setHasFreshBooksData] = useState(false);\n  const [freshBooksData, setFreshBooksData] = useState({});\n  const [bankingAuthData, setBankingAuthData] = useState([]);\n  setFormStep(0); // const QuickBooksPopup = () => {\n  //   let parameters = \"location=1,width=800,height=650\";\n  //   parameters +=\n  //     \",left=\" +\n  //     (window.screen.width - 800) / 2 +\n  //     \",top=\" +\n  //     (window.screen.height - 650) / 2;\n  //   window.open(\n  //     process.env.NODE_ENV === \"development\"\n  //       ? \"http://localhost:8000/intuit/oauth\"\n  //       : \"https://backend.grocapitalapp.com/intuit/oauth\",\n  //     \"connectPopupQuickbooks\",\n  //     parameters\n  //   );\n  // };\n  // const FreshbooksPopup = () => {\n  //   let parameters = \"location=1,width=800,height=650\";\n  //   parameters +=\n  //     \",left=\" +\n  //     (window.screen.width - 800) / 2 +\n  //     \",top=\" +\n  //     (window.screen.height - 650) / 2;\n  //   window.open(\n  //     process.env.NODE_ENV === \"development\"\n  //       ? \"http://localhost:8000/freshbooks_app/oauth\"\n  //       : \"https://backend.grocapitalapp.com/freshbooks_app/oauth\",\n  //     \"connectPopupFreshbooks\",\n  //     parameters\n  //   );\n  // };\n\n  const StakeHolderPopupHandler = () => {\n    setStakeHolderPopupState(!stakeHolderPopupState);\n  };\n\n  const handleDunsChange = ExpersianScore => {\n    setForm2State({ ...Form2,\n      Experian: ExpersianScore\n    });\n  };\n\n  useEffect(() => {\n    if (notificationPanelState || editProfileAsideState) {\n      document.body.classList.add(\"sidebar-visible\");\n    } else document.body.classList.remove(\"sidebar-visible\");\n  }, [notificationPanelState, editProfileAsideState]);\n  useEffect(() => {\n    const mapAllUserDataToContext = async data => {\n      try {\n        var clean_balance = data.balance.replace(/\\$|,/g, '');\n      } catch (error) {\n        var clean_balance = \"0\";\n        ;\n      }\n\n      setForm5State({ ...Form5,\n        YTDRevenue: parseInt(data.total_income) + \"\",\n        YTDProfit: parseInt(data.gross_profit_ytd) + \"\",\n        CurrentAR: parseInt(data.accounts_recieveable) + \"\",\n        CurrentAP: parseInt(data.total_accounts_payable) + \"\",\n        CurrentBankBalance: parseInt(clean_balance) + \"\"\n      });\n      setFormState({ ...Form,\n        FName: data.first_name,\n        LName: data.last_name,\n        Email: data.email\n      });\n      setForm3State({ ...Form3,\n        SocialSecurityNumber: data.social_security_number,\n        Birthday: data.birthday\n      });\n      await setForm2State({ ...Form2,\n        DUNS: data.duns,\n        BusinessPhysicalAddress: data.business_physical_address,\n        City: data.city,\n        State: data.state,\n        Zip: data.zip,\n        CorporateName: data.corporate_name,\n        EIN: data.ein\n      });\n      setAvatar(data.avatar);\n      setForm4State({ ...Form4\n      });\n    };\n\n    if (!dataFetched) {\n      fetch(baseUrl() + GET_ALL_DATA_USER_URL, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.getItem(\"token\")}`\n        }\n      }).then(res => res.json()).then(response => {\n        setDataFetched(true);\n        mapAllUserDataToContext(response); // setDataMapped(true);\n      }).then(() => setExperianAuthToken(\"True\")).catch(err => {\n        console.log(err);\n        setDataMapped(true);\n      });\n    }\n  }, [dataFetched, Form, Form2, Form3, Form5, Form4, setForm4State, setFormState, setForm2State, setForm3State, setForm5State, setAvatar]);\n  useEffect(() => {\n    if (experianAuthToken !== \"\" && !dataMapped) {\n      ConsumerCreditScore().then(response => setForm2State({ ...Form2,\n        Experian: response.score ? response.score + \"/800\" : \"\"\n      })).then(() => setDataMapped(true)).catch(err => {\n        console.log(err);\n        setDataMapped(true);\n      });\n    }\n  }, [experianAuthToken, Form2, setForm2State, dataMapped]);\n  useEffect(() => {\n    getAssetsLiabilititesAndEquity().then(res => {\n      if (res.success) {\n        if (res.payload[0]) {\n          setHasQuickBooksData(true);\n          setQuickBooksData(res.payload[0]);\n        }\n      }\n    }).catch(err => console.error(err));\n  }, []);\n  useEffect(() => {\n    getFreshbooksProfitLoss().then(res => {\n      if (res.success) {\n        if (res.payload[0]) {\n          setHasFreshBooksData(true);\n          setFreshBooksData(res.payload[0]);\n        }\n      }\n    }).catch(err => console.error(err));\n  }, []);\n  useEffect(() => {\n    const getBankingAutData = async () => {\n      const bankingAuthData_ = await fetch(plaidBaseUrl() + \"banking-auth/\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const response = await bankingAuthData_.json();\n      setBankingAuthData(response);\n    };\n\n    getBankingAutData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n    active: !dataMapped,\n    spinner: true,\n    text: \"Fetching Data...\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"dashboard-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"dashboard\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wrap\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"dashboard__row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"dashboard__content dashboard__content--sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: NamePriceCardData.map((data, index) => {\n                  return /*#__PURE__*/_jsxDEV(NamePriceCard, {\n                    name: data.name,\n                    title: data.title,\n                    price: Form5[data.name],\n                    fullWidth: index + 1 === NamePriceCardData.length\n                  }, data.id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 23\n                  }, this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 17\n              }, this), [{\n                title: \"Personal Information\",\n                data: PersonalinformationData\n              }, {\n                title: \"Company Information\",\n                data: CompanyinformationData\n              }].map((card, index) => {\n                return /*#__PURE__*/_jsxDEV(InformationCard, {\n                  title: card.title,\n                  data: card.data,\n                  callback: handleDunsChange,\n                  authToken: experianAuthToken\n                }, dataMapped + card.title, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 289,\n                  columnNumber: 21\n                }, this);\n              }), /*#__PURE__*/_jsxDEV(BankAuthTable, {\n                bankingAuthData: bankingAuthData\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"white-box--mb\",\n                children: /*#__PURE__*/_jsxDEV(AccountinginformationCard, {\n                  onclick: StakeHolderPopupHandler\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 302,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 17\n              }, this), hasQuickBooksData && /*#__PURE__*/_jsxDEV(QuickBooksTable, {\n                quickBooksData: quickBooksData\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this), hasFreshBooksData && /*#__PURE__*/_jsxDEV(FreshBooksTable, {\n                freshBooksData: freshBooksData\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(SideBar, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(PageOverlay, {\n        activeState: notificationPanelState || editProfileAsideState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NotificationPanel, {\n        activeState: notificationPanelState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(EditProfile, {\n        activeState: editProfileAsideState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(StakeHolderPopup, {\n        activeState: stakeHolderPopupState,\n        onclick: StakeHolderPopupHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 258,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Dashboard, \"Dk2RRQj8y7XyWh0fr5M7nH53HkA=\");\n\n_c = Dashboard;\nexport default Dashboard;\n\nvar _c;\n\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"sources":["/home/mutahharahmadpersonal/Development/Gro Pakistan/Current/grocapitalapp-react/src/pages/Dashboard/index.jsx"],"names":["AppControlContext","useContext","useState","useEffect","LoadingOverlay","NamePriceCard","InformationCard","AccountinginformationCard","SideBar","NotificationPanel","EditProfile","PageOverlay","StakeHolderPopup","QuickBooksTable","FreshBooksTable","BankAuthTable","CompanyPopup","CompanyinformationData","PersonalinformationData","NamePriceCardData","baseUrl","GET_ALL_DATA_USER_URL","ExperianScore","ExperianAuth","ConsumerCreditScore","getAssetsLiabilititesAndEquity","getFreshbooksProfitLoss","plaidBaseUrl","Dashboard","notificationPanelState","editProfileAsideState","Form5","setForm5State","Form4","setForm4State","Form","setFormState","Form3","setForm3State","Form2","setForm2State","setFormStep","setAvatar","stakeHolderPopupState","setStakeHolderPopupState","dataFetched","setDataFetched","dataMapped","setDataMapped","experianAuthToken","setExperianAuthToken","hasQuickBooksData","setHasQuickBooksData","quickBooksData","setQuickBooksData","hasFreshBooksData","setHasFreshBooksData","freshBooksData","setFreshBooksData","bankingAuthData","setBankingAuthData","StakeHolderPopupHandler","handleDunsChange","ExpersianScore","Experian","document","body","classList","add","remove","mapAllUserDataToContext","data","clean_balance","balance","replace","error","YTDRevenue","parseInt","total_income","YTDProfit","gross_profit_ytd","CurrentAR","accounts_recieveable","CurrentAP","total_accounts_payable","CurrentBankBalance","FName","first_name","LName","last_name","Email","email","SocialSecurityNumber","social_security_number","Birthday","birthday","DUNS","duns","BusinessPhysicalAddress","business_physical_address","City","city","State","state","Zip","zip","CorporateName","corporate_name","EIN","ein","avatar","fetch","method","headers","Authorization","localStorage","getItem","then","res","json","response","catch","err","console","log","score","success","payload","getBankingAutData","bankingAuthData_","map","index","name","title","length","id","card"],"mappings":";;;AAAA,SAASA,iBAAT,QAAkC,iCAAlC;AACA,SAASC,UAAT,EAAqBC,QAArB,EAA+BC,SAA/B,QAAgD,OAAhD;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,OAAOC,aAAP,MAA0B,sCAA1B;AACA,OAAOC,eAAP,MAA4B,wCAA5B;AACA,OAAOC,yBAAP,MAAsC,kDAAtC;AACA,OAAOC,OAAP,MAAoB,mCAApB;AACA,OAAOC,iBAAP,MAA8B,wDAA9B;AACA,OAAOC,WAAP,MAAwB,iDAAxB;AACA,OAAOC,WAAP,MAAwB,sCAAxB;AACA,OAAOC,gBAAP,MAA6B,0CAA7B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,YAAP,MAAyB,sCAAzB,C,CACA;;AACA,SACEC,sBADF,EAEEC,uBAFF,EAGEC,iBAHF,QAIO,4BAJP;AAKA,SAASC,OAAT,QAAwB,6BAAxB;AACA,SAASC,qBAAT,QAAsC,0BAAtC;AACA,OAAOC,aAAP,MAA0B,+BAA1B;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,mBAAP,MAAgC,wCAAhC;AACA,OAAOC,8BAAP,MAA2C,0DAA3C;AACA,OAAOC,uBAAP,MAAoC,mDAApC;AACA,SAASC,YAAT,QAA6B,gCAA7B;AACA,OAAO,kBAAP;;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AACtB;AACA,QAAM;AAAEC,IAAAA,sBAAF;AAA0BC,IAAAA;AAA1B,MACJ7B,UAAU,CAACD,iBAAD,CADZ;AAEA,QAAM;AACJ+B,IAAAA,KADI;AAEJC,IAAAA,aAFI;AAGJC,IAAAA,KAHI;AAIJC,IAAAA,aAJI;AAKJC,IAAAA,IALI;AAMJC,IAAAA,YANI;AAOJC,IAAAA,KAPI;AAQJC,IAAAA,aARI;AASJC,IAAAA,KATI;AAUJC,IAAAA,aAVI;AAWJC,IAAAA,WAXI;AAYJC,IAAAA;AAZI,MAaFzC,UAAU,CAACD,iBAAD,CAbd;AAcA,QAAM,CAAC2C,qBAAD,EAAwBC,wBAAxB,IAAoD1C,QAAQ,CAAC,KAAD,CAAlE;AACA,QAAM,CAAC2C,WAAD,EAAcC,cAAd,IAAgC5C,QAAQ,CAAC,KAAD,CAA9C;AACA,QAAM,CAAC6C,UAAD,EAAaC,aAAb,IAA8B9C,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM,CAAC+C,iBAAD,EAAoBC,oBAApB,IAA4ChD,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAACiD,iBAAD,EAAoBC,oBAApB,IAA4ClD,QAAQ,CAAC,KAAD,CAA1D;AACA,QAAM,CAACmD,cAAD,EAAiBC,iBAAjB,IAAsCpD,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACqD,iBAAD,EAAoBC,oBAApB,IAA4CtD,QAAQ,CAAC,KAAD,CAA1D;AACA,QAAM,CAACuD,cAAD,EAAiBC,iBAAjB,IAAsCxD,QAAQ,CAAC,EAAD,CAApD;AACA,QAAM,CAACyD,eAAD,EAAkBC,kBAAlB,IAAwC1D,QAAQ,CAAC,EAAD,CAAtD;AAEAuC,EAAAA,WAAW,CAAC,CAAD,CAAX,CA5BsB,CA8BtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAMoB,uBAAuB,GAAG,MAAM;AACpCjB,IAAAA,wBAAwB,CAAC,CAACD,qBAAF,CAAxB;AACD,GAFD;;AAIA,QAAMmB,gBAAgB,GAAIC,cAAD,IAAoB;AAC3CvB,IAAAA,aAAa,CAAC,EACZ,GAAGD,KADS;AAEZyB,MAAAA,QAAQ,EAACD;AAFG,KAAD,CAAb;AAID,GALD;;AAOA5D,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI0B,sBAAsB,IAAIC,qBAA9B,EAAqD;AACnDmC,MAAAA,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBC,GAAxB,CAA4B,iBAA5B;AACD,KAFD,MAEOH,QAAQ,CAACC,IAAT,CAAcC,SAAd,CAAwBE,MAAxB,CAA+B,iBAA/B;AACR,GAJQ,EAIN,CAACxC,sBAAD,EAAyBC,qBAAzB,CAJM,CAAT;AAMA3B,EAAAA,SAAS,CAAC,MAAM;AAEd,UAAMmE,uBAAuB,GAAG,MAAOC,IAAP,IAAgB;AAC9C,UAAI;AACF,YAAIC,aAAa,GAAGD,IAAI,CAACE,OAAL,CAAaC,OAAb,CAAqB,OAArB,EAA8B,EAA9B,CAApB;AACD,OAFD,CAEE,OAAOC,KAAP,EAAc;AACd,YAAIH,aAAa,GAAG,GAApB;AAAwB;AACzB;;AAEDxC,MAAAA,aAAa,CAAC,EACZ,GAAGD,KADS;AAEZ6C,QAAAA,UAAU,EAAEC,QAAQ,CAACN,IAAI,CAACO,YAAN,CAAR,GAA8B,EAF9B;AAGZC,QAAAA,SAAS,EAAEF,QAAQ,CAACN,IAAI,CAACS,gBAAN,CAAR,GAAkC,EAHjC;AAIZC,QAAAA,SAAS,EAAEJ,QAAQ,CAACN,IAAI,CAACW,oBAAN,CAAR,GAAsC,EAJrC;AAKZC,QAAAA,SAAS,EAAEN,QAAQ,CAACN,IAAI,CAACa,sBAAN,CAAR,GAAwC,EALvC;AAMZC,QAAAA,kBAAkB,EAAER,QAAQ,CAACL,aAAD,CAAR,GAA0B;AANlC,OAAD,CAAb;AASApC,MAAAA,YAAY,CAAC,EACX,GAAGD,IADQ;AAEXmD,QAAAA,KAAK,EAAEf,IAAI,CAACgB,UAFD;AAGXC,QAAAA,KAAK,EAAEjB,IAAI,CAACkB,SAHD;AAIXC,QAAAA,KAAK,EAAEnB,IAAI,CAACoB;AAJD,OAAD,CAAZ;AAOArD,MAAAA,aAAa,CAAC,EACZ,GAAGD,KADS;AAEZuD,QAAAA,oBAAoB,EAAErB,IAAI,CAACsB,sBAFf;AAGZC,QAAAA,QAAQ,EAAEvB,IAAI,CAACwB;AAHH,OAAD,CAAb;AAMA,YAAMvD,aAAa,CAAC,EAClB,GAAGD,KADe;AAElByD,QAAAA,IAAI,EAAEzB,IAAI,CAAC0B,IAFO;AAGlBC,QAAAA,uBAAuB,EAAE3B,IAAI,CAAC4B,yBAHZ;AAIlBC,QAAAA,IAAI,EAAE7B,IAAI,CAAC8B,IAJO;AAKlBC,QAAAA,KAAK,EAAE/B,IAAI,CAACgC,KALM;AAMlBC,QAAAA,GAAG,EAAEjC,IAAI,CAACkC,GANQ;AAOlBC,QAAAA,aAAa,EAAEnC,IAAI,CAACoC,cAPF;AAQlBC,QAAAA,GAAG,EAAErC,IAAI,CAACsC;AARQ,OAAD,CAAnB;AAWAnE,MAAAA,SAAS,CAAC6B,IAAI,CAACuC,MAAN,CAAT;AAEA5E,MAAAA,aAAa,CAAC,EACZ,GAAGD;AADS,OAAD,CAAb;AAGD,KA7CD;;AA+CA,QAAI,CAACY,WAAL,EAAkB;AAChBkE,MAAAA,KAAK,CAAC3F,OAAO,KAAKC,qBAAb,EAAoC;AACvC2F,QAAAA,MAAM,EAAE,KAD+B;AAEvCC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,SAAQC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAF/C;AAF8B,OAApC,CAAL,CAOGC,IAPH,CAOSC,GAAD,IAASA,GAAG,CAACC,IAAJ,EAPjB,EAQGF,IARH,CAQSG,QAAD,IAAc;AAClB1E,QAAAA,cAAc,CAAC,IAAD,CAAd;AACAwB,QAAAA,uBAAuB,CAACkD,QAAD,CAAvB,CAFkB,CAGlB;AACD,OAZH,EAaGH,IAbH,CAaQ,MAAMnE,oBAAoB,CAAC,MAAD,CAblC,EAcGuE,KAdH,CAcUC,GAAD,IAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA1E,QAAAA,aAAa,CAAC,IAAD,CAAb;AACD,OAjBH;AAkBD;AACF,GArEQ,EAqEN,CACDH,WADC,EAEDV,IAFC,EAGDI,KAHC,EAIDF,KAJC,EAKDN,KALC,EAMDE,KANC,EAODC,aAPC,EAQDE,YARC,EASDI,aATC,EAUDF,aAVC,EAWDN,aAXC,EAYDU,SAZC,CArEM,CAAT;AAoFAvC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI8C,iBAAiB,KAAK,EAAtB,IAA4B,CAACF,UAAjC,EAA6C;AAC3CvB,MAAAA,mBAAmB,GAChB6F,IADH,CACSG,QAAD,IACJhF,aAAa,CAAC,EACZ,GAAGD,KADS;AAEZyB,QAAAA,QAAQ,EAAEwD,QAAQ,CAACK,KAAT,GACNL,QAAQ,CAACK,KAAT,GAAiB,MADX,GAEN;AAJQ,OAAD,CAFjB,EASGR,IATH,CASQ,MAAMrE,aAAa,CAAC,IAAD,CAT3B,EAUGyE,KAVH,CAUUC,GAAD,IAAS;AACdC,QAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA1E,QAAAA,aAAa,CAAC,IAAD,CAAb;AACD,OAbH;AAcD;AACF,GAjBQ,EAiBN,CAACC,iBAAD,EAAoBV,KAApB,EAA2BC,aAA3B,EAA0CO,UAA1C,CAjBM,CAAT;AAmBA5C,EAAAA,SAAS,CAAC,MAAM;AACdsB,IAAAA,8BAA8B,GAC3B4F,IADH,CACSC,GAAD,IAAS;AACb,UAAIA,GAAG,CAACQ,OAAR,EAAiB;AACf,YAAIR,GAAG,CAACS,OAAJ,CAAY,CAAZ,CAAJ,EAAoB;AAClB3E,UAAAA,oBAAoB,CAAC,IAAD,CAApB;AACAE,UAAAA,iBAAiB,CAACgE,GAAG,CAACS,OAAJ,CAAY,CAAZ,CAAD,CAAjB;AACD;AACF;AACF,KARH,EASGN,KATH,CASUC,GAAD,IAASC,OAAO,CAAChD,KAAR,CAAc+C,GAAd,CATlB;AAUD,GAXQ,EAWN,EAXM,CAAT;AAaAvH,EAAAA,SAAS,CAAC,MAAM;AACduB,IAAAA,uBAAuB,GACpB2F,IADH,CACSC,GAAD,IAAS;AACb,UAAIA,GAAG,CAACQ,OAAR,EAAiB;AACf,YAAIR,GAAG,CAACS,OAAJ,CAAY,CAAZ,CAAJ,EAAoB;AAClBvE,UAAAA,oBAAoB,CAAC,IAAD,CAApB;AACAE,UAAAA,iBAAiB,CAAC4D,GAAG,CAACS,OAAJ,CAAY,CAAZ,CAAD,CAAjB;AACD;AACF;AACF,KARH,EASGN,KATH,CASUC,GAAD,IAASC,OAAO,CAAChD,KAAR,CAAc+C,GAAd,CATlB;AAUD,GAXQ,EAWN,EAXM,CAAT;AAaAvH,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM6H,iBAAiB,GAAG,YAAY;AACpC,YAAMC,gBAAgB,GAAG,MAAMlB,KAAK,CAACpF,YAAY,KAAK,eAAlB,EAAmC;AACrEqF,QAAAA,MAAM,EAAE,KAD6D;AAErEC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEPC,UAAAA,aAAa,EAAG,SAAQC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;AAF/C;AAF4D,OAAnC,CAApC;AAQA,YAAMI,QAAQ,GAAG,MAAMS,gBAAgB,CAACV,IAAjB,EAAvB;AACA3D,MAAAA,kBAAkB,CAAC4D,QAAD,CAAlB;AACD,KAXD;;AAaAQ,IAAAA,iBAAiB;AAClB,GAfQ,EAeN,EAfM,CAAT;AAiBA,sBACE,QAAC,cAAD;AAAgB,IAAA,MAAM,EAAE,CAACjF,UAAzB;AAAqC,IAAA,OAAO,MAA5C;AAA6C,IAAA,IAAI,EAAC,kBAAlD;AAAA,2BACE;AAAK,MAAA,EAAE,EAAC,gBAAR;AAAA,8BACE;AAAS,QAAA,SAAS,EAAC,WAAnB;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC,MAAf;AAAA,iCACE;AAAK,YAAA,SAAS,EAAC,gBAAf;AAAA,oCACE;AAAK,cAAA,SAAS,EAAC,2CAAf;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,KAAf;AAAA,0BACG5B,iBAAiB,CAAC+G,GAAlB,CAAsB,CAAC3D,IAAD,EAAO4D,KAAP,KAAiB;AACtC,sCACE,QAAC,aAAD;AACE,oBAAA,IAAI,EAAE5D,IAAI,CAAC6D,IADb;AAEE,oBAAA,KAAK,EAAE7D,IAAI,CAAC8D,KAFd;AAGE,oBAAA,KAAK,EAAEtG,KAAK,CAACwC,IAAI,CAAC6D,IAAN,CAHd;AAKE,oBAAA,SAAS,EAAED,KAAK,GAAG,CAAR,KAAchH,iBAAiB,CAACmH;AAL7C,qBAIO/D,IAAI,CAACgE,EAJZ;AAAA;AAAA;AAAA;AAAA,0BADF;AASD,iBAVA;AADH;AAAA;AAAA;AAAA;AAAA,sBADF,EAeG,CACC;AACEF,gBAAAA,KAAK,EAAE,sBADT;AAEE9D,gBAAAA,IAAI,EAAErD;AAFR,eADD,EAKC;AACEmH,gBAAAA,KAAK,EAAE,qBADT;AAEE9D,gBAAAA,IAAI,EAAEtD;AAFR,eALD,EASCiH,GATD,CASK,CAACM,IAAD,EAAOL,KAAP,KAAiB;AACrB,oCACE,QAAC,eAAD;AACE,kBAAA,KAAK,EAAEK,IAAI,CAACH,KADd;AAEE,kBAAA,IAAI,EAAEG,IAAI,CAACjE,IAFb;AAIE,kBAAA,QAAQ,EAAET,gBAJZ;AAKE,kBAAA,SAAS,EAAEb;AALb,mBAGOF,UAAU,GAAGyF,IAAI,CAACH,KAHzB;AAAA;AAAA;AAAA;AAAA,wBADF;AASD,eAnBA,CAfH,eAoCE,QAAC,aAAD;AAAe,gBAAA,eAAe,EAAE1E;AAAhC;AAAA;AAAA;AAAA;AAAA,sBApCF,eAsCE;AAAK,gBAAA,SAAS,EAAC,eAAf;AAAA,uCACE,QAAC,yBAAD;AACE,kBAAA,OAAO,EAAEE;AADX;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBAtCF,EAkEGV,iBAAiB,iBAChB,QAAC,eAAD;AAAiB,gBAAA,cAAc,EAAEE;AAAjC;AAAA;AAAA;AAAA;AAAA,sBAnEJ,EAqEGE,iBAAiB,iBAChB,QAAC,eAAD;AAAiB,gBAAA,cAAc,EAAEE;AAAjC;AAAA;AAAA;AAAA;AAAA,sBAtEJ;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eA0EE,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,oBA1EF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAiFE,QAAC,WAAD;AACE,QAAA,WAAW,EAAE5B,sBAAsB,IAAIC;AADzC;AAAA;AAAA;AAAA;AAAA,cAjFF,eAoFE,QAAC,iBAAD;AAAmB,QAAA,WAAW,EAAED;AAAhC;AAAA;AAAA;AAAA;AAAA,cApFF,eAqFE,QAAC,WAAD;AAAa,QAAA,WAAW,EAAEC;AAA1B;AAAA;AAAA;AAAA;AAAA,cArFF,eAsFE,QAAC,gBAAD;AACE,QAAA,WAAW,EAAEa,qBADf;AAEE,QAAA,OAAO,EAAEkB;AAFX;AAAA;AAAA;AAAA;AAAA,cAtFF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AA+FD,CAhUD;;GAAMjC,S;;KAAAA,S;AAkUN,eAAeA,SAAf","sourcesContent":["import { AppControlContext } from \"../../context/AppControlContext\";\nimport { useContext, useState, useEffect } from \"react\";\nimport LoadingOverlay from \"react-loading-overlay\";\nimport NamePriceCard from \"../../components/Cards/NamePriceCard\";\nimport InformationCard from \"../../components/Cards/InformationCard\";\nimport AccountinginformationCard from \"../../components/Cards/AccountinginformationCard\";\nimport SideBar from \"../../components/SideBar/SideBar1\";\nimport NotificationPanel from \"../../components/Asides/Notification/NotificationPanel\";\nimport EditProfile from \"../../components/Asides/EditProfile/EditProfile\";\nimport PageOverlay from \"../../components/Overlay/PageOverlay\";\nimport StakeHolderPopup from \"../../components/Popups/StakeHolderPopup\";\nimport QuickBooksTable from \"./QuickBooksTable\";\nimport FreshBooksTable from \"./FreshBooksTable\";\nimport BankAuthTable from \"./BankAuthTable\";\nimport CompanyPopup from '../../components/Popups/CompanyPopup';\n// import AccountingButton from \"../../components/Buttons/AccountingButton\";\nimport {\n  CompanyinformationData,\n  PersonalinformationData,\n  NamePriceCardData,\n} from \"./util/InformationCardData\";\nimport { baseUrl } from \"../../services/util/baseUrl\";\nimport { GET_ALL_DATA_USER_URL } from \"../../services/util/urls\";\nimport ExperianScore from \"../../services/Experian/Score\";\nimport ExperianAuth from \"../../services/Experian/Auth\";\nimport ConsumerCreditScore from '../../services/CRS/consumerCreditScore';\nimport getAssetsLiabilititesAndEquity from \"../../services/QuickBooks/GetAssetsLiabilititesAndEquity\";\nimport getFreshbooksProfitLoss from \"../../services/Freshbooks/GetFreshbooksProfitLoss\";\nimport { plaidBaseUrl } from \"../../services/util/baseUrl.js\";\nimport \"./Dashboard.scss\";\n\nconst Dashboard = () => {\n  // document.body.style.overflowY = \"hidden\";\n  const { notificationPanelState, editProfileAsideState } =\n    useContext(AppControlContext);\n  const {\n    Form5,\n    setForm5State,\n    Form4,\n    setForm4State,\n    Form,\n    setFormState,\n    Form3,\n    setForm3State,\n    Form2,\n    setForm2State,\n    setFormStep,\n    setAvatar,\n  } = useContext(AppControlContext);\n  const [stakeHolderPopupState, setStakeHolderPopupState] = useState(false);\n  const [dataFetched, setDataFetched] = useState(false);\n  const [dataMapped, setDataMapped] = useState(false);\n  const [experianAuthToken, setExperianAuthToken] = useState(\"\");\n  const [hasQuickBooksData, setHasQuickBooksData] = useState(false);\n  const [quickBooksData, setQuickBooksData] = useState({});\n  const [hasFreshBooksData, setHasFreshBooksData] = useState(false);\n  const [freshBooksData, setFreshBooksData] = useState({});\n  const [bankingAuthData, setBankingAuthData] = useState([]);\n\n  setFormStep(0);\n\n  // const QuickBooksPopup = () => {\n  //   let parameters = \"location=1,width=800,height=650\";\n  //   parameters +=\n  //     \",left=\" +\n  //     (window.screen.width - 800) / 2 +\n  //     \",top=\" +\n  //     (window.screen.height - 650) / 2;\n  //   window.open(\n  //     process.env.NODE_ENV === \"development\"\n  //       ? \"http://localhost:8000/intuit/oauth\"\n  //       : \"https://backend.grocapitalapp.com/intuit/oauth\",\n  //     \"connectPopupQuickbooks\",\n  //     parameters\n  //   );\n  // };\n\n  // const FreshbooksPopup = () => {\n  //   let parameters = \"location=1,width=800,height=650\";\n  //   parameters +=\n  //     \",left=\" +\n  //     (window.screen.width - 800) / 2 +\n  //     \",top=\" +\n  //     (window.screen.height - 650) / 2;\n  //   window.open(\n  //     process.env.NODE_ENV === \"development\"\n  //       ? \"http://localhost:8000/freshbooks_app/oauth\"\n  //       : \"https://backend.grocapitalapp.com/freshbooks_app/oauth\",\n  //     \"connectPopupFreshbooks\",\n  //     parameters\n  //   );\n  // };\n\n  const StakeHolderPopupHandler = () => {\n    setStakeHolderPopupState(!stakeHolderPopupState);\n  };\n\n  const handleDunsChange = (ExpersianScore) => {\n    setForm2State({\n      ...Form2,\n      Experian:ExpersianScore\n    });\n  };\n\n  useEffect(() => {\n    if (notificationPanelState || editProfileAsideState) {\n      document.body.classList.add(\"sidebar-visible\");\n    } else document.body.classList.remove(\"sidebar-visible\");\n  }, [notificationPanelState, editProfileAsideState]);\n\n  useEffect(() => {\n\n    const mapAllUserDataToContext = async (data) => {\n      try {\n        var clean_balance = data.balance.replace(/\\$|,/g, '',);\n      } catch (error) {\n        var clean_balance = \"0\";;\n      }\n      \n      setForm5State({\n        ...Form5,\n        YTDRevenue: parseInt(data.total_income) + \"\",\n        YTDProfit: parseInt(data.gross_profit_ytd) + \"\",\n        CurrentAR: parseInt(data.accounts_recieveable) + \"\",\n        CurrentAP: parseInt(data.total_accounts_payable) + \"\",\n        CurrentBankBalance: parseInt(clean_balance) + \"\",\n      });\n\n      setFormState({\n        ...Form,\n        FName: data.first_name,\n        LName: data.last_name,\n        Email: data.email,\n      });\n\n      setForm3State({\n        ...Form3,\n        SocialSecurityNumber: data.social_security_number,\n        Birthday: data.birthday,\n      });\n\n      await setForm2State({\n        ...Form2,\n        DUNS: data.duns,\n        BusinessPhysicalAddress: data.business_physical_address,\n        City: data.city,\n        State: data.state,\n        Zip: data.zip,\n        CorporateName: data.corporate_name,\n        EIN: data.ein\n      });\n\n      setAvatar(data.avatar);\n\n      setForm4State({\n        ...Form4,\n      });\n    };\n\n    if (!dataFetched) {\n      fetch(baseUrl() + GET_ALL_DATA_USER_URL, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.getItem(\"token\")}`,\n        },\n      })\n        .then((res) => res.json())\n        .then((response) => {\n          setDataFetched(true);\n          mapAllUserDataToContext(response);\n          // setDataMapped(true);\n        })\n        .then(() => setExperianAuthToken(\"True\"))\n        .catch((err) => {\n          console.log(err);\n          setDataMapped(true)\n        });\n    }\n  }, [\n    dataFetched,\n    Form,\n    Form2,\n    Form3,\n    Form5,\n    Form4,\n    setForm4State,\n    setFormState,\n    setForm2State,\n    setForm3State,\n    setForm5State,\n    setAvatar\n  ]);\n\n  useEffect(() => {\n    if (experianAuthToken !== \"\" && !dataMapped) {\n      ConsumerCreditScore()\n        .then((response) =>\n          setForm2State({\n            ...Form2,\n            Experian: response.score\n              ? response.score + \"/800\"\n              : \"\",\n          })\n        )\n        .then(() => setDataMapped(true))\n        .catch((err) => {\n          console.log(err);\n          setDataMapped(true)\n        });\n    }\n  }, [experianAuthToken, Form2, setForm2State, dataMapped]);\n\n  useEffect(() => {\n    getAssetsLiabilititesAndEquity()\n      .then((res) => {\n        if (res.success) {\n          if (res.payload[0]) {\n            setHasQuickBooksData(true);\n            setQuickBooksData(res.payload[0]);\n          }\n        }\n      })\n      .catch((err) => console.error(err));\n  }, []);\n\n  useEffect(() => {\n    getFreshbooksProfitLoss()\n      .then((res) => {\n        if (res.success) {\n          if (res.payload[0]) {\n            setHasFreshBooksData(true);\n            setFreshBooksData(res.payload[0]);\n          }\n        }\n      })\n      .catch((err) => console.error(err));\n  }, []);\n\n  useEffect(() => {\n    const getBankingAutData = async () => {\n      const bankingAuthData_ = await fetch(plaidBaseUrl() + \"banking-auth/\", {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Token ${localStorage.getItem(\"token\")}`,\n        },\n      });\n\n      const response = await bankingAuthData_.json();\n      setBankingAuthData(response);\n    };\n\n    getBankingAutData();\n  }, []);\n\n  return (\n    <LoadingOverlay active={!dataMapped} spinner text=\"Fetching Data...\">\n      <div id=\"dashboard-page\">\n        <section className=\"dashboard\">\n          <div className=\"wrap\">\n            <div className=\"dashboard__row\">\n              <div className=\"dashboard__content dashboard__content--sm\">\n                <div className=\"row\">\n                  {NamePriceCardData.map((data, index) => {\n                    return (\n                      <NamePriceCard\n                        name={data.name}\n                        title={data.title}\n                        price={Form5[data.name]}\n                        key={data.id}\n                        fullWidth={index + 1 === NamePriceCardData.length}\n                      />\n                    );\n                  })}\n                </div>\n\n                {[\n                  {\n                    title: \"Personal Information\",\n                    data: PersonalinformationData,\n                  },\n                  {\n                    title: \"Company Information\",\n                    data: CompanyinformationData,\n                  },\n                ].map((card, index) => {\n                  return (\n                    <InformationCard\n                      title={card.title}\n                      data={card.data}\n                      key={dataMapped + card.title}\n                      callback={handleDunsChange}\n                      authToken={experianAuthToken}\n                    />\n                  );\n                })}\n\n                <BankAuthTable bankingAuthData={bankingAuthData} />\n\n                <div className=\"white-box--mb\">\n                  <AccountinginformationCard\n                    onclick={StakeHolderPopupHandler}\n                  />\n                </div>\n\n                {/* <div\n                  style={{\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    width: \"50%\",\n                    paddingRight: \"10px\",\n                  }}\n                >\n                  {!hasQuickBooksData && (\n                    <AccountingButton\n                      onClick={QuickBooksPopup}\n                      name=\"QuickBooks\"\n                    />\n                  )}\n                  {!hasFreshBooksData && (\n                    <AccountingButton\n                      onClick={FreshbooksPopup}\n                      name=\"Freshbooks\"\n                    />\n                  )}\n                </div> */}\n\n                {hasQuickBooksData && (\n                  <QuickBooksTable quickBooksData={quickBooksData} />\n                )}\n                {hasFreshBooksData && (\n                  <FreshBooksTable freshBooksData={freshBooksData} />\n                )}\n              </div>\n              <SideBar />\n            </div>\n          </div>\n        </section>\n        <PageOverlay\n          activeState={notificationPanelState || editProfileAsideState}\n        />\n        <NotificationPanel activeState={notificationPanelState} />\n        <EditProfile activeState={editProfileAsideState} />\n        <StakeHolderPopup\n          activeState={stakeHolderPopupState}\n          onclick={StakeHolderPopupHandler}\n        />\n      </div>\n    </LoadingOverlay>\n  );\n};\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}